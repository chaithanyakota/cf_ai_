{
  "version": 3,
  "sources": ["../bundle-vCBz1P/strip-cf-connecting-ip-header.js", "../../../src/DocSession.ts", "../../../src/server.ts", "../../../node_modules/wrangler/templates/middleware/middleware-ensure-req-body-drained.ts", "../../../node_modules/wrangler/templates/middleware/middleware-miniflare3-json-error.ts", "../bundle-vCBz1P/middleware-insertion-facade.js", "../../../node_modules/wrangler/templates/middleware/common.ts", "../bundle-vCBz1P/middleware-loader.entry.ts"],
  "sourceRoot": "/Users/chaithanyakota/Code/cf_ai_/.wrangler/tmp/dev-t7AMEx",
  "sourcesContent": ["function stripCfConnectingIPHeader(input, init) {\n\tconst request = new Request(input, init);\n\trequest.headers.delete(\"CF-Connecting-IP\");\n\treturn request;\n}\n\nglobalThis.fetch = new Proxy(globalThis.fetch, {\n\tapply(target, thisArg, argArray) {\n\t\treturn Reflect.apply(target, thisArg, [\n\t\t\tstripCfConnectingIPHeader.apply(null, argArray),\n\t\t]);\n\t},\n});\n", "export interface Env {\n  AI: Ai;\n}\n\ninterface Chunk {\n  id: string;\n  text: string;\n  sourceUrl: string;\n}\n\ninterface StoredState {\n  url: string | null;\n  chunks: Chunk[];\n  messages: { role: \"user\" | \"assistant\"; content: string }[];\n}\n\nconst SYSTEM_PROMPT = `You are a helpful documentation assistant. Use the following documentation excerpts as your primary context: prefer and cite them when they answer the question. You may also use general knowledge to give clearer or more complete explanations when helpful\u2014for example, to define terms, add examples, or clarify how something works in practice. When the doc is relevant, say so and quote or paraphrase it; when you go beyond the doc, keep explanations focused and useful.`;\n\nconst CHUNK_SIZE = 600;\nconst MAX_CHUNKS_FOR_CONTEXT = 8;\n\nfunction stripHtml(html: string): string {\n  const noScript = html.replace(/<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi, \"\");\n  const noStyle = noScript.replace(/<style\\b[^<]*(?:(?!<\\/style>)<[^<]*)*<\\/style>/gi, \"\");\n  const blockNewline = noStyle.replace(/<\\/(p|div|h[1-6]|li|tr|br)\\s*>/gi, \"\\n\");\n  const text = blockNewline.replace(/<[^>]+>/g, \" \");\n  return text.replace(/\\s+/g, \" \").trim();\n}\n\nfunction chunkText(text: string, sourceUrl: string): Chunk[] {\n  const chunks: Chunk[] = [];\n  const paragraphs = text.split(/\\n+/).filter((p) => p.trim().length > 0);\n  let current = \"\";\n  let index = 0;\n\n  for (const p of paragraphs) {\n    if (current.length + p.length > CHUNK_SIZE && current.length > 0) {\n      chunks.push({\n        id: `c-${index++}`,\n        text: current.trim(),\n        sourceUrl,\n      });\n      current = \"\";\n    }\n    current += (current ? \"\\n\\n\" : \"\") + p;\n  }\n  if (current.trim()) {\n    chunks.push({\n      id: `c-${index}`,\n      text: current.trim(),\n      sourceUrl,\n    });\n  }\n\n  if (chunks.length === 0 && text.trim()) {\n    chunks.push({ id: \"c-0\", text: text.trim().slice(0, 4000), sourceUrl });\n  }\n  return chunks;\n}\n\nexport class DocSession implements DurableObject {\n  private url: string | null = null;\n  private chunks: Chunk[] = [];\n  private messages: { role: \"user\" | \"assistant\"; content: string }[] = [];\n  private state: DurableObjectState;\n  private env: Env;\n\n  constructor(ctx: DurableObjectState, env: Env) {\n    this.state = ctx;\n    this.env = env;\n    ctx.blockConcurrencyWhile(async () => {\n      const stored = await ctx.storage.get<StoredState>(\"state\");\n      if (stored) {\n        this.url = stored.url ?? null;\n        this.chunks = (stored.chunks ?? []) as Chunk[];\n        this.messages = (stored.messages ?? []) as typeof this.messages;\n      }\n    });\n  }\n\n  private async persist(): Promise<void> {\n    await this.state.storage.put(\"state\", {\n      url: this.url,\n      chunks: this.chunks,\n      messages: this.messages,\n    } as StoredState);\n  }\n\n  private getRelevantChunks(query: string, k: number): Chunk[] {\n    if (this.chunks.length === 0) return [];\n    if (this.chunks.length <= k) return [...this.chunks];\n\n    const words = query\n      .toLowerCase()\n      .split(/\\s+/)\n      .filter((w) => w.length > 1);\n    if (words.length === 0) return this.chunks.slice(0, k);\n\n    const scored = this.chunks.map((c) => ({\n      chunk: c,\n      score: words.filter((w) => c.text.toLowerCase().includes(w)).length,\n    }));\n    scored.sort((a, b) => b.score - a.score);\n    const top = scored.slice(0, k).map((s) => s.chunk);\n    const anyMatch = scored.slice(0, k).some((s) => s.score > 0);\n    if (!anyMatch) return this.chunks.slice(0, k);\n    return top;\n  }\n\n  async fetch(request: Request): Promise<Response> {\n    const u = new URL(request.url);\n\n    if (u.pathname === \"/set-url\" && request.method === \"POST\") {\n      let body: { url?: string };\n      try {\n        body = (await request.json()) as { url?: string };\n      } catch {\n        return new Response(JSON.stringify({ error: \"Invalid JSON\" }), {\n          status: 400,\n          headers: { \"Content-Type\": \"application/json\" },\n        });\n      }\n      const url = typeof body.url === \"string\" ? body.url.trim() : \"\";\n      if (!url) {\n        return new Response(JSON.stringify({ error: \"Missing url\" }), {\n          status: 400,\n          headers: { \"Content-Type\": \"application/json\" },\n        });\n      }\n      try {\n        const res = await fetch(url, {\n          headers: { \"User-Agent\": \"OneUrlDocQA/1.0\" },\n        });\n        if (!res.ok) {\n          return new Response(\n            JSON.stringify({ error: `Fetch failed: ${res.status}` }),\n            { status: 400, headers: { \"Content-Type\": \"application/json\" } }\n          );\n        }\n        const html = await res.text();\n        const text = stripHtml(html);\n        this.chunks = chunkText(text, url);\n        this.url = url;\n        this.messages = [];\n        await this.persist();\n        return new Response(\n          JSON.stringify({ ok: true, chunks: this.chunks.length, url }),\n          { headers: { \"Content-Type\": \"application/json\" } }\n        );\n      } catch (e) {\n        const msg = e instanceof Error ? e.message : \"Unknown error\";\n        return new Response(\n          JSON.stringify({ error: `Failed to load URL: ${msg}` }),\n          { status: 400, headers: { \"Content-Type\": \"application/json\" } }\n        );\n      }\n    }\n\n    if (u.pathname === \"/ask\" && request.method === \"POST\") {\n      let body: { message?: string };\n      try {\n        body = (await request.json()) as { message?: string };\n      } catch {\n        return new Response(JSON.stringify({ error: \"Invalid JSON\" }), {\n          status: 400,\n          headers: { \"Content-Type\": \"application/json\" },\n        });\n      }\n      const message = typeof body.message === \"string\" ? body.message.trim() : \"\";\n      if (!message) {\n        return new Response(JSON.stringify({ error: \"Missing message\" }), {\n          status: 400,\n          headers: { \"Content-Type\": \"application/json\" },\n        });\n      }\n      if (this.chunks.length === 0) {\n        return new Response(\n          JSON.stringify({\n            error: \"No documentation loaded. Set a URL first with /api/set-url.\",\n          }),\n          { status: 400, headers: { \"Content-Type\": \"application/json\" } }\n        );\n      }\n\n      this.messages.push({ role: \"user\", content: message });\n      const relevant = this.getRelevantChunks(message, MAX_CHUNKS_FOR_CONTEXT);\n      const context = relevant.map((c) => c.text).join(\"\\n\\n---\\n\\n\");\n      const lastFew = this.messages.slice(-6).map((m) => `${m.role}: ${m.content}`).join(\"\\n\");\n      const userPrompt = `Documentation excerpts:\\n\\n${context}\\n\\nConversation:\\n${lastFew}\\n\\nAnswer the last user question using only the documentation excerpts above.`;\n\n      try {\n        const stream = await this.env.AI.run(\"@cf/meta/llama-3.3-70b-instruct-fp8-fast\", {\n          messages: [\n            { role: \"system\", content: SYSTEM_PROMPT },\n            { role: \"user\", content: userPrompt },\n          ],\n          stream: true,\n        }) as ReadableStream<Uint8Array>;\n\n        const [streamForClient, streamForCollect] = stream.tee();\n        const decoder = new TextDecoder();\n        (async () => {\n          const parts: string[] = [];\n          const reader = streamForCollect.getReader();\n          const dec = new TextDecoder();\n          let buffer = \"\";\n          try {\n            while (true) {\n              const { done, value } = await reader.read();\n              if (done) break;\n              buffer += dec.decode(value, { stream: true });\n              const lines = buffer.split(\"\\n\");\n              buffer = lines.pop() ?? \"\";\n              for (const line of lines) {\n                if (line.startsWith(\"data: \")) {\n                  try {\n                    const data = JSON.parse(line.slice(6)) as { response?: string };\n                    if (data.response != null) parts.push(data.response);\n                  } catch (_) {}\n                }\n              }\n            }\n            if (buffer.trim().startsWith(\"data: \")) {\n              try {\n                const data = JSON.parse(buffer.trim().slice(6)) as { response?: string };\n                if (data.response != null) parts.push(data.response);\n              } catch (_) {}\n            }\n            const assistantContent = parts.join(\"\");\n            this.messages.push({ role: \"assistant\", content: assistantContent });\n            await this.persist();\n          } catch (_) {}\n        })();\n\n        return new Response(streamForClient, {\n          headers: { \"Content-Type\": \"text/event-stream\" },\n        });\n      } catch (e) {\n        this.messages.pop();\n        const msg = e instanceof Error ? e.message : \"Unknown error\";\n        return new Response(\n          JSON.stringify({ error: `AI error: ${msg}` }),\n          { status: 500, headers: { \"Content-Type\": \"application/json\" } }\n        );\n      }\n    }\n\n    if (u.pathname === \"/status\" && request.method === \"GET\") {\n      return new Response(\n        JSON.stringify({\n          url: this.url,\n          chunks: this.chunks.length,\n          messages: this.messages.length,\n        }),\n        { headers: { \"Content-Type\": \"application/json\" } }\n      );\n    }\n\n    return new Response(\"Not found\", { status: 404 });\n  }\n}\n", "import { DocSession } from \"./DocSession\";\n\nexport { DocSession };\n\nexport interface Env {\n  DOC_SESSION: DurableObjectNamespace;\n  AI: Ai;\n  ASSETS: Fetcher;\n}\n\nexport default {\n  async fetch(request: Request, env: Env, _ctx: ExecutionContext): Promise<Response> {\n    const url = new URL(request.url);\n\n    if (url.pathname.startsWith(\"/api/\")) {\n      const hadSession = request.headers.get(\"Cookie\")?.includes(\"session_id=\");\n      let sessionId = request.headers.get(\"Cookie\")?.match(/session_id=([^;]+)/)?.[1];\n      if (!sessionId) {\n        sessionId = crypto.randomUUID();\n      }\n\n      const id = env.DOC_SESSION.idFromName(sessionId);\n      const stub = env.DOC_SESSION.get(id);\n      const doPath = url.pathname.replace(/^\\/api/, \"\");\n      const doRequest = new Request(`http://do${doPath}${url.search}`, {\n        method: request.method,\n        headers: request.headers,\n        body: request.body,\n      });\n      let response = await stub.fetch(doRequest);\n\n      if (!hadSession) {\n        response = new Response(response.body, {\n          status: response.status,\n          statusText: response.statusText,\n          headers: new Headers(response.headers),\n        });\n        response.headers.set(\n          \"Set-Cookie\",\n          `session_id=${sessionId}; Path=/; HttpOnly; SameSite=Lax`\n        );\n      }\n      return response;\n    }\n\n    return env.ASSETS.fetch(request);\n  },\n};\n", "import type { Middleware } from \"./common\";\n\nconst drainBody: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} finally {\n\t\ttry {\n\t\t\tif (request.body !== null && !request.bodyUsed) {\n\t\t\t\tconst reader = request.body.getReader();\n\t\t\t\twhile (!(await reader.read()).done) {}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(\"Failed to drain the unused request body.\", e);\n\t\t}\n\t}\n};\n\nexport default drainBody;\n", "import type { Middleware } from \"./common\";\n\ninterface JsonError {\n\tmessage?: string;\n\tname?: string;\n\tstack?: string;\n\tcause?: JsonError;\n}\n\nfunction reduceError(e: any): JsonError {\n\treturn {\n\t\tname: e?.name,\n\t\tmessage: e?.message ?? String(e),\n\t\tstack: e?.stack,\n\t\tcause: e?.cause === undefined ? undefined : reduceError(e.cause),\n\t};\n}\n\n// See comment in `bundle.ts` for details on why this is needed\nconst jsonError: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} catch (e: any) {\n\t\tconst error = reduceError(e);\n\t\treturn Response.json(error, {\n\t\t\tstatus: 500,\n\t\t\theaders: { \"MF-Experimental-Error-Stack\": \"true\" },\n\t\t});\n\t}\n};\n\nexport default jsonError;\n", "\t\t\t\timport worker, * as OTHER_EXPORTS from \"/Users/chaithanyakota/Code/cf_ai_/src/server.ts\";\n\t\t\t\timport * as __MIDDLEWARE_0__ from \"/Users/chaithanyakota/Code/cf_ai_/node_modules/wrangler/templates/middleware/middleware-ensure-req-body-drained.ts\";\nimport * as __MIDDLEWARE_1__ from \"/Users/chaithanyakota/Code/cf_ai_/node_modules/wrangler/templates/middleware/middleware-miniflare3-json-error.ts\";\n\n\t\t\t\texport * from \"/Users/chaithanyakota/Code/cf_ai_/src/server.ts\";\n\n\t\t\t\texport const __INTERNAL_WRANGLER_MIDDLEWARE__ = [\n\t\t\t\t\t\n\t\t\t\t\t__MIDDLEWARE_0__.default,__MIDDLEWARE_1__.default\n\t\t\t\t]\n\t\t\t\texport default worker;", "export type Awaitable<T> = T | Promise<T>;\n// TODO: allow dispatching more events?\nexport type Dispatcher = (\n\ttype: \"scheduled\",\n\tinit: { cron?: string }\n) => Awaitable<void>;\n\nexport type IncomingRequest = Request<\n\tunknown,\n\tIncomingRequestCfProperties<unknown>\n>;\n\nexport interface MiddlewareContext {\n\tdispatch: Dispatcher;\n\tnext(request: IncomingRequest, env: any): Awaitable<Response>;\n}\n\nexport type Middleware = (\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tmiddlewareCtx: MiddlewareContext\n) => Awaitable<Response>;\n\nconst __facade_middleware__: Middleware[] = [];\n\n// The register functions allow for the insertion of one or many middleware,\n// We register internal middleware first in the stack, but have no way of controlling\n// the order that addMiddleware is run in service workers so need an internal function.\nexport function __facade_register__(...args: (Middleware | Middleware[])[]) {\n\t__facade_middleware__.push(...args.flat());\n}\nexport function __facade_registerInternal__(\n\t...args: (Middleware | Middleware[])[]\n) {\n\t__facade_middleware__.unshift(...args.flat());\n}\n\nfunction __facade_invokeChain__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tmiddlewareChain: Middleware[]\n): Awaitable<Response> {\n\tconst [head, ...tail] = middlewareChain;\n\tconst middlewareCtx: MiddlewareContext = {\n\t\tdispatch,\n\t\tnext(newRequest, newEnv) {\n\t\t\treturn __facade_invokeChain__(newRequest, newEnv, ctx, dispatch, tail);\n\t\t},\n\t};\n\treturn head(request, env, ctx, middlewareCtx);\n}\n\nexport function __facade_invoke__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tfinalMiddleware: Middleware\n): Awaitable<Response> {\n\treturn __facade_invokeChain__(request, env, ctx, dispatch, [\n\t\t...__facade_middleware__,\n\t\tfinalMiddleware,\n\t]);\n}\n", "// This loads all middlewares exposed on the middleware object and then starts\n// the invocation chain. The big idea is that we can add these to the middleware\n// export dynamically through wrangler, or we can potentially let users directly\n// add them as a sort of \"plugin\" system.\n\nimport ENTRY, { __INTERNAL_WRANGLER_MIDDLEWARE__ } from \"/Users/chaithanyakota/Code/cf_ai_/.wrangler/tmp/bundle-vCBz1P/middleware-insertion-facade.js\";\nimport { __facade_invoke__, __facade_register__, Dispatcher } from \"/Users/chaithanyakota/Code/cf_ai_/node_modules/wrangler/templates/middleware/common.ts\";\nimport type { WorkerEntrypointConstructor } from \"/Users/chaithanyakota/Code/cf_ai_/.wrangler/tmp/bundle-vCBz1P/middleware-insertion-facade.js\";\n\n// Preserve all the exports from the worker\nexport * from \"/Users/chaithanyakota/Code/cf_ai_/.wrangler/tmp/bundle-vCBz1P/middleware-insertion-facade.js\";\n\nclass __Facade_ScheduledController__ implements ScheduledController {\n\treadonly #noRetry: ScheduledController[\"noRetry\"];\n\n\tconstructor(\n\t\treadonly scheduledTime: number,\n\t\treadonly cron: string,\n\t\tnoRetry: ScheduledController[\"noRetry\"]\n\t) {\n\t\tthis.#noRetry = noRetry;\n\t}\n\n\tnoRetry() {\n\t\tif (!(this instanceof __Facade_ScheduledController__)) {\n\t\t\tthrow new TypeError(\"Illegal invocation\");\n\t\t}\n\t\t// Need to call native method immediately in case uncaught error thrown\n\t\tthis.#noRetry();\n\t}\n}\n\nfunction wrapExportedHandler(worker: ExportedHandler): ExportedHandler {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn worker;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\tconst fetchDispatcher: ExportedHandlerFetchHandler = function (\n\t\trequest,\n\t\tenv,\n\t\tctx\n\t) {\n\t\tif (worker.fetch === undefined) {\n\t\t\tthrow new Error(\"Handler does not export a fetch() function.\");\n\t\t}\n\t\treturn worker.fetch(request, env, ctx);\n\t};\n\n\treturn {\n\t\t...worker,\n\t\tfetch(request, env, ctx) {\n\t\t\tconst dispatcher: Dispatcher = function (type, init) {\n\t\t\t\tif (type === \"scheduled\" && worker.scheduled !== undefined) {\n\t\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\t\tDate.now(),\n\t\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t\t() => {}\n\t\t\t\t\t);\n\t\t\t\t\treturn worker.scheduled(controller, env, ctx);\n\t\t\t\t}\n\t\t\t};\n\t\t\treturn __facade_invoke__(request, env, ctx, dispatcher, fetchDispatcher);\n\t\t},\n\t};\n}\n\nfunction wrapWorkerEntrypoint(\n\tklass: WorkerEntrypointConstructor\n): WorkerEntrypointConstructor {\n\t// If we don't have any middleware defined, just return the handler as is\n\tif (\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__ === undefined ||\n\t\t__INTERNAL_WRANGLER_MIDDLEWARE__.length === 0\n\t) {\n\t\treturn klass;\n\t}\n\t// Otherwise, register all middleware once\n\tfor (const middleware of __INTERNAL_WRANGLER_MIDDLEWARE__) {\n\t\t__facade_register__(middleware);\n\t}\n\n\t// `extend`ing `klass` here so other RPC methods remain callable\n\treturn class extends klass {\n\t\t#fetchDispatcher: ExportedHandlerFetchHandler<Record<string, unknown>> = (\n\t\t\trequest,\n\t\t\tenv,\n\t\t\tctx\n\t\t) => {\n\t\t\tthis.env = env;\n\t\t\tthis.ctx = ctx;\n\t\t\tif (super.fetch === undefined) {\n\t\t\t\tthrow new Error(\"Entrypoint class does not define a fetch() function.\");\n\t\t\t}\n\t\t\treturn super.fetch(request);\n\t\t};\n\n\t\t#dispatcher: Dispatcher = (type, init) => {\n\t\t\tif (type === \"scheduled\" && super.scheduled !== undefined) {\n\t\t\t\tconst controller = new __Facade_ScheduledController__(\n\t\t\t\t\tDate.now(),\n\t\t\t\t\tinit.cron ?? \"\",\n\t\t\t\t\t() => {}\n\t\t\t\t);\n\t\t\t\treturn super.scheduled(controller);\n\t\t\t}\n\t\t};\n\n\t\tfetch(request: Request<unknown, IncomingRequestCfProperties>) {\n\t\t\treturn __facade_invoke__(\n\t\t\t\trequest,\n\t\t\t\tthis.env,\n\t\t\t\tthis.ctx,\n\t\t\t\tthis.#dispatcher,\n\t\t\t\tthis.#fetchDispatcher\n\t\t\t);\n\t\t}\n\t};\n}\n\nlet WRAPPED_ENTRY: ExportedHandler | WorkerEntrypointConstructor | undefined;\nif (typeof ENTRY === \"object\") {\n\tWRAPPED_ENTRY = wrapExportedHandler(ENTRY);\n} else if (typeof ENTRY === \"function\") {\n\tWRAPPED_ENTRY = wrapWorkerEntrypoint(ENTRY);\n}\nexport default WRAPPED_ENTRY;\n"],
  "mappings": "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",
  "names": []
}
